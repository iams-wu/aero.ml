let [] [] cons = [] in

let cons h t [] cons = cons h t in

let reverse l =
  let rec reverse l acc =
    let [] = acc in
    let cons h t = reverse t ( cons h acc ) in
    l [] cons
  in
  reverse l []
in

let rec cat delimiter list =
  let [] = "" in
  let cons h t =
    let nil = h in
    let cons h' t' =
      h ^ delimiter ^ ( cat delimiter t )
    in
    t nil cons
  in
  list [] cons
in

let pair x y sel = sel x y in

let ~,~ = pair in




let ava = "A --- dialectically ML --- Programming Language" in

let supported_platforms = cons "Ethereum Virtual Machine" [] in

let dependencies = cons "ubuntu" ( cons "ocaml" ( cons "git" [] ) ) in

let recommended_dependencies = cons "emacs" ( cons "tuareg" [] ) in

let how_to_install = cons ( 1 , "sudo apt-get install " ^ ( cat " " dependencies ) ^ " " ^ ( cat " " recommended_dependencies ) ) ( cons ( 2 , "git clone https://github.com/yithump/ava.ml" ) [] ) in

let how_to_run = cons ( "Ethereum Backend" , "ocaml ava.ml file.ml --web3" ) [] in

ava



  
  ~~~ example

  $ ocaml ava.ml example.ml

  $ cat example.js
  
personal.unlockAccount(eth.coinbase, "")
var test_contract = web3.eth.contract(
  [
    {
      "constant":false,
      "inputs":[],
      "name":"run",
      "outputs":[{"name":"","type":"string"}],
      "payable":false,
      "type":"function"
     }
   ]
);

var test = test_contract.new(
  {
    from: web3.eth.accounts[0],
    data: '0x630000111b566c00000000000000000000000bb76000805860060192565b9050805164ffffffff0016610100900460010160200290602001f35b80518068ffffffff000000000016650100000000009004908064ffffffff001661010090049060ff169293565b6033905860060191565b60020191506002016020028301929082825b81518152602001906020019091600190039182586014900357505050909192565b6033905860060191565b141517600d580157602001806020019051565b9091565b906033905860060191565b90119050601f58015790916060915860060192565b9050609d91905860060192565b9091905b908180516101000180825264ffffffff0016610100900460010160200201529091565b8160016020020191816003602002015190926060915860060192565b91939160009150836000602002015160be929591905860060193565b909390836001602002015160be929591905860060193565b90939090602002820152600060200201519050609d565b81600060200201915060016020020151609d565b81600060200201915060006020020151609d565b81600060200201915060006020020151609d565b81600060200201918260026501000000000002815260200161018d815260200160026020020192915050609d565b8160046020020191816000602002015190926060915860060192565b91939160009150836000602002015160be929591905860060193565b909390836001602002015160be929591905860060193565b909390836004602002015160be929591905860060193565b90939090602002820152816001602002015190926060915860060192565b91939160019150836003602002015160be929591905860060193565b909390906020028201528260046501000000000002815260200161011281526020016004602002019260029090602002820152806002602002015190926060915860060192565b91939160039150826001602002015160be929591905860060193565b909390826000602002015160be929591905860060193565b90939090602002820152600360200201519050609d565b8160036020020191826003650100000000000281526020016101b5815260200160036020020192600090836000602002015160be929591905860060193565b909390836001602002015160be929591905860060193565b909390836002602002015160be929591905860060193565b90939090602002820152826005650100000000000281526020016101e3815260200160056020020192600190836000602002015160be929591905860060193565b909390836001602002015160be929591905860060193565b909390836002602002015160be929591905860060193565b90939090602002820152816002602002015190926060915860060192565b91939160029150826000602002015160be929591905860060193565b909390826001602002015160be929591905860060193565b90939090602002820152600260200201519050609d565b816003602002019182600365010000000000028152602001610317815260200160036020020192600090906020028201528260036501000000000002815260200161031781526020016003602002019260019090602002820152806000602002015190926060915860060192565b91939160029150826001602002015160be929591905860060193565b909390836000602002015160be929591905860060193565b909390836001602002015160be929591905860060193565b90939090602002820152600260200201519050609d565b81600360200201918260026501000000000002815260200161017981526020016002602002019260009090602002820152826002650100000000000281526020016101a181526020016002602002019260019090602002820152816000602002015190926060915860060192565b91939160029150826000602002015160be929591905860060193565b909390826001602002015160be929591905860060193565b90939090602002820152600260200201519050609d565b816000602002019150508060026501000000010002600201815260200160208152602001600281526020017f5b5d000000000000000000000000000000000000000000000000000000000000815260200191565b9282518260001415600a580157509392505050565b609d9190805186161558600a9003935795949093602001926001900391505860349003565b8161063e916002805860060194565b92509060609192905860060192565b905080604001519192806040015180919360209006016020900480650100000001000283510183529082604001519081018360400152909260400180516020900490602001909183606001015b8151815260200190602001908260019003926000901158601790035750505091906020020191565b8160046020020191816000602002015190926060915860060192565b91939160009150836000602002015160be929591905860060193565b909390836001602002015160be929591905860060193565b909390836004602002015160be929591905860060193565b90939090602002820152816001602002015190926060915860060192565b91939160019150836003602002015160be929591905860060193565b9093909060200282015282600265010000000000028152602001610678815260200160026020020192600290826001602002015160be929591905860060193565b9093908460026501000000010002600201815260200160208152602001600481526020017f203a3a2000000000000000000000000000000000000000000000000000000000815260200160be92959190915860060193565b9093909060200282015282600265010000000000028152602001610678815260200160026020020192600390826002602002015160be929591905860060193565b909390826000602002015160be929591905860060193565b90939090602002820152600360200201519050609d565b8160036020020191826003650100000000000281526020016105ea815260200160036020020192600090836000602002015160be929591905860060193565b909390836001602002015160be929591905860060193565b909390836002602002015160be929591905860060193565b909390906020028201528260056501000000000002815260200161070b815260200160056020020192600190836000602002015160be929591905860060193565b909390836001602002015160be929591905860060193565b909390836002602002015160be929591905860060193565b90939090602002820152816002602002015190926060915860060192565b91939160029150826000602002015160be929591905860060193565b909390826001602002015160be929591905860060193565b90939090602002820152600260200201519050609d565b8160036020020191826003650100000000000281526020016108b681526020016003602002019260009090602002820152826003650100000000000281526020016108b681526020016003602002019260019090602002820152806000602002015190926060915860060192565b91939160029150826001602002015160be929591905860060193565b909390836000602002015160be929591905860060193565b909390836001602002015160be929591905860060193565b90939090602002820152600260200201519050609d565b8160016020020191816000602002015190926060915860060192565b919391600091508460026501000000010002600201815260200160208152602001600581526020017f66616c7365000000000000000000000000000000000000000000000000000000815260200160be92959190915860060193565b9093908460026501000000010002600201815260200160208152602001600481526020017f7472756500000000000000000000000000000000000000000000000000000000815260200160be92959190915860060193565b90939090602002820152600060200201519050609d565b8160196020020191826004650100000000000281526020016101128152602001600460200201926000909060200282015282600265010000000000028152602001610179815260200160026020020192600190906020028201528260026501000000000002815260200161018d81526020016002602002019260029090602002820152806000602002015190926060915860060192565b91939160039150826001602002015160be929591905860060193565b909390826002602002015160be929591905860060193565b909390906020028201528260046501000000000002815260200161011281526020016004602002019260049090602002820152826002650100000000000281526020016101a181526020016002602002019260059090602002820152806004602002015190926060915860060192565b91939160069150826005602002015160be929591905860060193565b909390826003602002015160be929591905860060193565b9093909060200282015282600465010000000000028152602001610112815260200160046020020192600790906020028201528260026501000000000002815260200161017981526020016002602002019260089090602002820152806007602002015190926060915860060192565b91939160099150826008602002015160be929591905860060193565b909390826006602002015160be929591905860060193565b9093909060200282015282600465010000000000028152602001610112815260200160046020020192600a9090602002820152826002650100000000000281526020016101a1815260200160026020020192600b909060200282015280600a602002015190926060915860060192565b919391600c915082600b602002015160be929591905860060193565b909390826009602002015160be929591905860060193565b9093909060200282015282600465010000000000028152602001610112815260200160046020020192600d909060200282015282600265010000000000028152602001610179815260200160026020020192600e909060200282015280600d602002015190926060915860060192565b919391600f915082600e602002015160be929591905860060193565b90939082600c602002015160be929591905860060193565b909390906020028201528260046501000000000002815260200161011281526020016004602002019260109090602002820152826002650100000000000281526020016101a181526020016002602002019260119090602002820152806010602002015190926060915860060192565b91939160129150826011602002015160be929591905860060193565b90939082600f602002015160be929591905860060193565b9093909060200282015282600265010000000000028152602001610460815260200160026020020192601390906020028201528260016501000000000002815260200161053181526020016001602002019260149090602002820152806013602002015190926060915860060192565b91939160159150826014602002015160be929591905860060193565b909390826012602002015160be929591905860060193565b90939090602002820152826002650100000000000281526020016109ff8152602001600260200201926016909060200282015282600165010000000000028152602001610ad081526020016001602002019260179090602002820152806016602002015190926060915860060192565b91939160189150826017602002015160be929591905860060193565b909390826015602002015160be929591905860060193565b90939090602002820152601860200201519050609d565b6111158060066000396000f3'
    gas: '4700000'
  },
  function (e, contract){
    console.log(e, contract);
    if (typeof contract.address !== 'undefined') {
      console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
  }
})

